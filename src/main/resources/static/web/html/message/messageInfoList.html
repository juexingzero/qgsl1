<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>消息管理</title>
	<link type="text/css" href="/resources/organizational/css/style.css" rel="stylesheet"/>
	<script src="/resources/miniui/scripts/boot.js" type="text/javascript"></script>
	<script src="/resources/organizational/js/util.js" type="text/javascript"></script>
</head>

<body>
	<!-- 消息列表 -->
	<div class="flow_hidden">
	    <div id="searchForm_messageInfo" style="margin-bottom:10px;">
	        <table class="search_table_border">
	            <tr>
	                <td style="width:20%;">
	                	<label style="padding-left:5px;">消息类型</label>
	                    <select name="message_type" class="mini-combobox" style="width:120px" value="0" onvaluechanged="loadInfoGridData">
	                        <option value="0">--请选择--</option>
	                        <option value="1">广播通知</option>
	                        <option value="2">工作任务</option>
	                        <option value="3">意见回复</option>
	                    </select>
	                	<label style="padding-left:10px;">消息形式</label>
	                    <select name="message_mode" class="mini-combobox" style="width:120px" value="0" onvaluechanged="loadInfoGridData">
	                        <option value="0">--请选择--</option>
	                        <option value="1">文本</option>
	                        <option value="2">图片</option>
	                        <option value="3">语音</option>
	                        <option value="4">视频</option>
	                        <option value="5">混合</option>
	                    </select>
	                	<label style="padding-left:10px;">消息内容</label>
	    				<input name="message_content" emptyText="请输入消息内容" class="mini-textbox" width="200px" onenter="loadGridData"/>
	                	<a class="mini-button searchBtn_info"><i class="fa fa-search"></i>查询</a>
	    				<a class="mini-button cleanBtn_info"><i class="fa fa-repeat"></i>重置</a>
	                </td>
	            </tr>
	        </table>
	    </div>
		<div class="mini-toolbar" style="margin:0;padding:0px;">
		    <table style="width:100%; table-layout:fixed;">
		        <tr>
		            <td align="left" width="60" nowrap="nowrap"><label style="font-family:Verdana;padding-left:5px;">消息列表</label></td>
		            <td align="right" nowrap="nowrap">
		                <a id="btnNew" class="mini-button" iconCls=""><i class="fa fa-plus"></i>新增</a>
		                <a id="btnDelete" class="mini-button" iconCls=""><i class="fa fa-trash"></i>删除</a>
		                <a id="sendMessage" class="mini-button" iconCls=""><i class="fa fa-sign-in"></i>发送消息</a>
		            </td>
		        </tr>
		    </table>
		</div>
	</div>
	
	<div id="mini-fit" class="mini-fit" >
	    <div id="datagrid_messageInfoList" class="mini-datagrid" style="width:100%;height:100%;" sizeList="[5,10,20,50]" pageSize="20"
	         url="/web/v1/message/getMessageInfoList" idField="message_id" multiSelect="true" onrowdblclick="onRowDblClick" onrowclick="onrowclick">
	        <div property="columns">
	            <div type="checkcolumn" width="50px" headerAlign="center" align="center"></div>
	            <div field="message_type" headerAlign="center" align="center" renderer="onConvertMessageType">消息类型</div>
	            <div field="message_mode" headerAlign="center" align="center" renderer="onConvertMessageMode">消息形式</div>
	            <div field="message_content" width="40%" headerAlign="center">消息内容</div>
	            <div field="create_time" width="10%" headerAlign="center" align="center" dateFormat="yyyy-MM-dd HH:mm:ss">创建时间</div>
	        </div>
	    </div>
	</div>
	
	<!-- 发送列表 -->
	<div id="searchForm_messageFlowing">
        <input style="display: none;" name="message_id" value="" class="mini-textbox">
	    <div class="mini-toolbar" style="margin:0;padding:0px;border-bottom:none;display:none;">
	        <table style="width:100%;table-layout:fixed;background-color:#ffffff;">
	            <tr>
	                <td style="width:20%;" align="left">
	                	<label style="font-family:Verdana;padding-left:5px;">发送方名称</label>
	    				<input name="send_name" emptyText="请输入发送方名称" class="mini-textbox" width="300px" onenter="loadGridData"/>
	                	<label style="font-family:Verdana;padding-left:5px;">接收方名称</label>
	    				<input name="receive_name" emptyText="请输入接收方名称" class="mini-textbox" width="300px" onenter="loadGridData"/>
	                	<a class="mini-button searchBtn_flowing">查询</a>
	    				<a class="mini-button cleanBtn_flowing">重置</a>
	                </td>
	            </tr>
	        </table>
	    </div>
	</div>
	<div class="mini-toolbar toolbar-header" style="margin:0px;padding:0px;">
	    <table style="width:100%; table-layout:fixed;">
	        <tr>
	            <td align="left" width="60" nowrap="nowrap"><label style="font-family:Verdana;padding-left:5px;">发送列表</label></td>
	        </tr>
	    </table>
	</div>
    <div id="datagrid_messageFlowingList" class="mini-datagrid" style="width:100%;height:40%;" borderStyle="border-left:0;border-right:0;border-top:0;" sizeList="[5,10,20,50]" pageSize="20"
         url="/web/v1/message/getMessageFlowingList" idField="flowing_id">
        <div property="columns">
	        <div type="indexcolumn" width="50px" headerAlign="center" align="center">序号</div>
            <div field="send_name" headerAlign="center" align="center">发送方名称</div>
            <div field="receive_name" headerAlign="center" align="center">接收方名称</div>
            <div field="send_time" width="10%" headerAlign="center" align="center" dateFormat="yyyy-MM-dd HH:mm:ss">发送时间</div>
            <div field="is_read" headerAlign="center" align="center" renderer="onConvertIsRead">是否已读</div>
            <div field="read_time" width="10%" headerAlign="center" align="center" dateFormat="yyyy-MM-dd HH:mm:ss">已读时间</div>
        </div>
    </div>
    
	<script type="text/javascript" src="/resources/js/message/messageInfoList.js"></script>
</body>
</html>